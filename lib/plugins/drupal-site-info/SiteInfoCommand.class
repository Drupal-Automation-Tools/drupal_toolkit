<?php
/**
 * @file Defines the SiteInfoCommand class.
 */

/**
 * Displays information about the specified site.
 */
class SiteInfoCommand extends GenericSiteCommand {
  
  public function verifyArguments() {
    if (!$this->requireSite()) {
      return FALSE;
    }
    return parent::verifyArguments();
  }
  
  public function executeCommand() {
    $this->displayInformation($this->getSite());
  }
  
  protected function displayInformation(GenericDrupalEntity $entity) {
    $event = new SiteInfoEvent($entity);
    $this->events()->fireEvent(EVENT_GET_INFO, $event);
    $info = $event->getInfo();
    $longestKey = 0;
    foreach (array_keys($info) as $key) {
      $len = strlen($key);
      if ($len > $longestKey) {
        $longestKey = $len;
      }
    }
    $longestKey += 3;
    echo PHP_EOL;
    echo terminal_color_string($this->str(STRING_INFO_HEADER), TERMINAL_FOREGROUND_COLOR_WHITE) . PHP_EOL;
    echo '--------------------------------------------------------------------' . PHP_EOL;
    foreach ($info as $key => $data) {
      echo str_pad($key . ':', $longestKey, ' ') . $data . PHP_EOL;
    }
    echo '--------------------------------------------------------------------' . PHP_EOL;
    echo PHP_EOL;
  }
  
}