<?php
/*
 * @file Defines the DrupalSiteExistsPlugin class.
 */

/**
 * Responsible for registering the SiteExistsCommand object and its
 * configuration, etc.
 */
class DrupalSiteExistsPlugin extends GenericPlugin implements EventListener {
  
  public function __construct() {
    $this->includeFiles(dirname(__FILE__), array(
      'SiteExistsCommand.class',
      'SubSiteExistsCommand.class',
    ));
  }
  
  public function initialize() {
    $this->events()->registerListener(array(
      EVENT_CORE_REGISTER_COMMANDS,
    ), $this);
  }
  
  public function requiredPlugins() {
    return array('DrupalSitePlugin');
  }
  
  public function captureEvent(DtkEvent &$context, $eventType) {
    switch ($eventType) {
      case EVENT_CORE_REGISTER_COMMANDS:
        $this->router()->addCommand('site-exists', new SiteExistsCommand());
        $this->router()->addCommand('subsite-exists', new SubSiteExistsCommand());
        break;
    }
  }
  
}
