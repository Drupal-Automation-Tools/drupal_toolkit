<?php
/**
 * @file Defines the GenericMachine class.
 */

/**
 * Abstract implementation of PhysicalServerInterface that takes on 
 * responsibility for many common functionalities between local and remote 
 * machines.
 */
abstract class GenericMachine implements PhysicalServerInterface {
  
  /**
   * A list of settings.
   * 
   * @var array
   */
  private $vars;
  
  /**
   * Stores this machine's identifying key.
   * 
   * @var string
   */
  private $nameKey;
  
  /**
   * Constructor.
   * 
   * @param array $vars
   *   A list of settings
   */
  public function __construct(array $vars = array()) {
    $this->vars = $vars;
  }
  
  public function setNameKey($key) {
    $this->nameKey = $key;
  }
  
  public function getNameKey() {
    return $this->nameKey;
  }
  
  public function serialize() {
    $this->sleep();
    return serialize(array(
      'parent::vars' => $this->vars,
      'namekey' => $this->nameKey,
    ));
  }
  
  public function unserialize($serialized) {
    $str = unserialize($serialized);
    $this->vars = $str['parent::vars'];
    $this->nameKey = $str['namekey'];
  }
  
  public function sleep() {
    
  }
  
  public function initialize() {
    return TRUE;
  }
  
  
  public function getSetting($key, $default = NULL) {
    if (isset($this->vars[$key])) {
      return $this->vars[$key];
    }
    return $default;
  }
  
  public function getSettings() {
    return $this->vars;
  }
  
  public function getEOL() {
    return "\n";
  }
  
}