<?php
/**
 * Defines the DrupalSiteInstallPlugin class.
 */

/**
 * Sets up the site-install command.
 */
class DrupalSiteInstallPlugin extends GenericPlugin implements EventListener {
  
  public function initialize() {
    $base = dirname(__FILE__);
    require assemble_path($base, 'SiteInstallCommand.class');
    require assemble_path($base, 'SubSiteInstallCommand.class');
    $this->events()->registerListener(array(
      EVENT_CORE_REGISTER_COMMANDS,
    ), $this);
  }
  
  public function requiredPlugins() {
    return array('DrupalSitePlugin');
  }
  
  public function captureEvent(&$context, $eventType) {
    switch ($eventType) {
      case EVENT_CORE_REGISTER_COMMANDS:
        $this->router()->addCommand('site-install', new SiteInstallCommand());
        $this->router()->addCommand('subsite-install', new SubSiteInstallCommand());
        break;
    }
  }
  
}