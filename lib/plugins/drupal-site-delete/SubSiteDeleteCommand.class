<?php
/**
 * @file Defines the SubSiteDeleteCommand class.
 */

/**
 * Responsible for organizing the deletion of a subsite.
 */
class SubSiteDeleteCommand extends GenericSiteCommand {
  
  public function verifyRequirements() {
    if (!$this->requireSubSite()) {
      return FALSE;
    }
    return parent::verifyRequirements();
  }
  
  public function executeCommand() {
    $context = (object) array(
      'subsite' => $this->getSubSite(),
      'success' => TRUE,
      'handled' => FALSE,
    );
    $this->events()->fireEvent(EVENT_REMOTE_SUBSITE_ALL, $context);
    $this->events()->fireEvent(EVENT_REMOTE_SUBSITE_CLEANUP, $context);
    if (empty($context->success)) {
      $this->error(STRING_ERROR_REMOVE_SUBSITE);
      exit(1);
    }
  }
  
}