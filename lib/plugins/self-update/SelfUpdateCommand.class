<?php
/**
 * @file Defines the SelfUpdateCommand class.
 */

/**
 * Allows the user to update the toolkit from the latest build.
 * 
 * @ingroup commands
 */
class SelfUpdateCommand extends GenericCommand {
  
  public function executeCommand() {
    $coreUpdateEvent = new DtkEvent(FALSE);
    $this->events()->fireEvent(EVENT_SELF_UPDATE_CORE, $coreUpdateEvent);
    if (!$coreUpdateEvent->success()) {
      $this->error(STRING_SELF_UPDATE_ERROR);
    }
    $extrasUpdateEvent = new DtkEvent(FALSE);
    $this->events()->fireEvent(EVENT_SELF_UPDATE_EXTRAS, $extrasUpdateEvent);
    if (!$extrasUpdateEvent->success()) {
      $this->error(STRING_SELF_UPDATE_ERROR);
    }
  }
  
}